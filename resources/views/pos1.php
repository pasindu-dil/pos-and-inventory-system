<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <!-- Apple devices fullscreen -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <!-- Apple devices fullscreen -->
    <meta names="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="description" content="PosShop">
    <meta name="author" content="Bitspeck Solutions">
    <link rel="shortcut icon" href="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/uploads/settings/logo.png" />
    <!-- Apple devices Homescreen icon -->
    <link rel="apple-touch-icon-precomposed" href="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/theme/img/logo.png" />
    <title>Sale Product</title>
    <!-- Start Link AdminLTE -->
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/fontawesome-free/css/all.min.css">
    <!-- Ionicons -->
    <!-- Tempusdominus Bbootstrap 4 -->
    <link rel="stylesheet" href="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css">
    <!-- iCheck -->
    <link rel="stylesheet" href="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/icheck-bootstrap/icheck-bootstrap.min.css">
    <!-- JQVMap -->
    <link rel="stylesheet" href="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/jqvmap/jqvmap.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/css/adminlte.min.css">
    <!-- overlayScrollbars -->
    <link rel="stylesheet" href="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/overlayScrollbars/css/OverlayScrollbars.min.css">
    <!-- Daterange picker -->
    <!-- summernote -->
    <link rel="stylesheet" href="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/summernote/summernote-bs4.css">
    <link rel="stylesheet" href="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/select2/css/select2.min.css">
    <link rel="stylesheet" href="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/select2-bootstrap4-theme/select2-bootstrap4.min.css">
    <!-- Datatable -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.20/css/jquery.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.dataTables.min.css">
    <link href="https://cdn.datatables.net/buttons/1.2.2/css/buttons.dataTables.min.css" rel="stylesheet" type="text/css" />

    <!-- Dropify -->
    <link rel="stylesheet" href="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/dropify/css/dropify.min.css">
    <!-- Search Css -->
    <link rel="stylesheet" href="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/search.css">
    <!-- Range Slider Css -->
    <link rel="stylesheet" href="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/range_slider.css">

    <!-- Google Font: Source Sans Pro -->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">
    <!-- Ion Slider -->
    <link rel="stylesheet" href="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/ion-rangeslider/css/ion.rangeSlider.min.css">
    <!-- bootstrap slider -->
    <link rel="stylesheet" href="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/bootstrap-slider/css/bootstrap-slider.min.css">
    <!-- Chart Js -->
    <link rel="stylesheet" href="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/chart.js/Chart.min.css">
    <link rel="stylesheet" href="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/dropzone-master/dist/dropzone.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css">
    <!-- End Link AdminLTE -->
    <!-- Start Script AdminLTE -->
    <!-- jQuery -->
    <script src="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/jquery/jquery.min.js"></script>
    <!-- jQuery UI 1.11.4 -->
    <script src="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/jquery-ui/jquery-ui.min.js"></script>
    <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
    <script>
        $.widget.bridge('uibutton', $.ui.button)
    </script>
    <!-- Bootstrap 4 -->
    <script src="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- ChartJS -->
    <script src="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/chart.js/Chart.min.js"></script>
    <!-- Sparkline -->
    <script src="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/sparklines/sparkline.js"></script>
    <!-- JQVMap -->
    <script src="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/jqvmap/jquery.vmap.min.js"></script>
    <script src="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/jqvmap/maps/jquery.vmap.usa.js"></script>
    <!-- jQuery Knob Chart -->
    <script src="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/jquery-knob/jquery.knob.min.js"></script>
    <!-- daterangepicker -->
    <script src="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/moment/moment.min.js"></script>
    <!-- Tempusdominus Bootstrap 4 -->
    <script src="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>
    <!-- Summernote -->
    <script src="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/summernote/summernote-bs4.min.js"></script>
    <!-- overlayScrollbars -->
    <script src="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js"></script>
    <!-- AdminLTE App -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.20/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>
    <!-- start - This is for export functionality only -->
    <script src="https://cdn.datatables.net/buttons/1.2.2/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.2.2/js/buttons.flash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.min.js"></script>
    <script src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/pdfmake.min.js"></script>
    <script src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.2.2/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.2.2/js/buttons.print.min.js"></script>
    <script src="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/js/adminlte.js"></script>
    <script src="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/select2/js/select2.full.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/clockpicker/0.0.7/jquery-clockpicker.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clockpicker/0.0.7/jquery-clockpicker.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.1/jquery.validate.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-daterangepicker/3.0.5/daterangepicker.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-daterangepicker/3.0.5/daterangepicker.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jQuery-slimScroll/1.3.8/jquery.slimscroll.min.js"></script>
    <!-- Ion Slider -->
    <script src="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/ion-rangeslider/js/ion.rangeSlider.min.js"></script>
    <script src="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/js/product-range.js"></script>
    <!-- Dropify -->
    <script src="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/dropify/js/dropify.min.js"></script>
    <script src="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/dropzone-master/dist/dropzone.js"></script>
    <!-- CKEditor -->
    <script src="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/ckeditor/ckeditor.js"></script>
    <script src="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/resources/assets/AdminLTE/plugins/ckeditor/samples/js/sample.js"></script>
    <!-- End Script AdminLTE -->
</head>

<body class="">


    <div class="wrapper" style="background-color: #4b545c;">
        <!-- ============================================================== -->
        <!-- Page Content -->
        <!-- ============================================================== -->

        <div class="content-wrapper" style="margin-left: 0px;">
            <section class="content">
                <div class="container-fluid pt-3">

                    <style type="text/css">
                        label.error {
                            color: #d63384;
                        }

                        #multi_delete {
                            position: fixed;
                            z-index: 9999;
                            margin-left: 43%;
                        }

                        .saleTable>tbody>tr>td {
                            padding: 5px 5px;
                        }

                        #searchResult {
                            list-style: none;
                            padding: 0px;
                            width: 50rem;
                            position: absolute;
                            margin-left: 4.9%;
                            top: 2.3rem;
                            z-index: 9999;
                        }

                        #searchResult li {
                            background: pink;
                            padding: 5px;
                            color: black;
                        }

                        #searchResult li:nth-child(even) {
                            background: #eeeeee;
                            color: black;
                        }

                        #searchResult li:hover,
                        #searchResult li.selected {
                            cursor: pointer;
                            background-color: #d170cf;
                            color: white;
                        }

                        #searchResultCustomer {
                            list-style: none;
                            padding: 0px;
                            width: 31rem;
                            position: absolute;
                            margin-left: 14.4%;
                            top: 2.3rem;
                            z-index: 9999;
                        }

                        #searchResultCustomer li {
                            background: white;
                            padding: 5px;
                            color: black;
                        }

                        #searchResultCustomer li:nth-child(even) {
                            background: #eeeeee;
                            color: black;
                        }

                        #searchResultCustomer li:hover {
                            cursor: pointer;
                            background-color: #d170cf;
                            color: white;
                        }

                        @media only screen and (max-width: 768px) {

                            /* For desktop: */
                            #searchResult {
                                list-style: none;
                                padding: 0px;
                                width: 17.4rem;
                                position: absolute;
                                margin-left: 11.9%;
                                top: 2.3rem;
                                z-index: 9999;
                            }

                            #searchResultCustomer {
                                list-style: none;
                                padding: 0px;
                                width: 13rem;
                                position: absolute;
                                margin-left: 27%;
                                top: 2.3rem;
                                z-index: 9999;
                            }
                        }

                        .btn-circle {
                            width: 30px;
                            height: 30px;
                            padding: 6px 0px;
                            border-radius: 15px;
                            text-align: center;
                            font-size: 12px;
                            line-height: 1.42857;
                        }

                        .display_currency {
                            font-size: 14px;
                            font-weight: 800;
                        }

                        .modal-body {
                            background-color: #d63384;
                            color: white;
                        }

                        .card-header {
                            background-color: #d63384;
                            color: white;
                        }

                        .collapsed-card {
                            background-color: #d63384;
                        }

                        .btn-primary {
                            background-color: #d63384;
                        }

                        .btn-sm {
                            background-color: blue;
                        }

                        .btn-danger {
                            background-color: red;
                        }
                    </style>
                    <div class="modal fade" id="view_register_modal" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">
                        <div class="modal-dialog modal-lg" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">Current Register ( 25th Feb, 2023 07:10 AM - 13th Mar, 2023 07:00 AM)</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <table class="table">
                                                <tr>
                                                    <td>
                                                        Cash In hand:
                                                    </td>
                                                    <td>
                                                        <span class="display_currency" data-currency_symbol="true">Rs.</span><span id="opening_balance1"></span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        Total Sales:
                                                    </td>
                                                    <td>
                                                        <span class="display_currency" data-currency_symbol="true">Rs.</span><span id="total_sale1"></span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        Total Receipt:
                                                    </td>
                                                    <td>
                                                        <span class="display_currency" data-currency_symbol="true">Rs.</span><span id="total_receipt1"></span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        Total Due:
                                                    </td>
                                                    <td>
                                                        <span class="display_currency" data-currency_symbol="true">Rs.</span><span id="total_due1"></span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        Total Payment:
                                                    </td>
                                                    <td>
                                                        <span class="display_currency" data-currency_symbol="true">Rs.</span><span id="total_payment1"></span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        Total Expense:
                                                    </td>
                                                    <td>
                                                        <span class="display_currency" data-currency_symbol="true">Rs.</span><span id="total_expense1"></span>
                                                    </td>
                                                </tr>
                                                <tr style="border-top: 2px solid black">
                                                    <td>
                                                        Total:
                                                    </td>
                                                    <td>
                                                        <span class="display_currency" data-currency_symbol="true">Rs.</span><span id="grand_total1"></span>
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">

                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Modal -->
                    <div class="modal fade" id="close_register_modal" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">
                        <div class="modal-dialog modal-lg" role="document">
                            <div class="modal-content">
                                <form method="POST" action="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/admin/sale/closeregister/7" accept-charset="UTF-8"><input name="_token" type="hidden" value="uPdtEncQmMIRsjyI2cTJaPbOZIYvvMZRJ7RxpPqH">
                                    <div class="modal-header">
                                        <h5 class="modal-title">Current Register ( 25th Feb, 2023 07:10 AM - 13th Mar, 2023 07:00 AM)</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <table class="table">
                                                    <tr>
                                                        <td>
                                                            Cash In hand:
                                                        </td>
                                                        <td>
                                                            <span class="display_currency" data-currency_symbol="true">Rs.</span><span id="opening_balance"></span>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            Total Sales:
                                                        </td>
                                                        <td>
                                                            <span class="display_currency" data-currency_symbol="true">Rs.</span><span id="total_sale"></span>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            Total Receipt:
                                                        </td>
                                                        <td>
                                                            <span class="display_currency" data-currency_symbol="true">Rs.</span><span id="total_receipt"></span>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            Total Due:
                                                        </td>
                                                        <td>
                                                            <span class="display_currency" data-currency_symbol="true">Rs.</span><span id="total_due"></span>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            Total Payment:
                                                        </td>
                                                        <td>
                                                            <span class="display_currency" data-currency_symbol="true">Rs.</span><span id="total_payment"></span>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>
                                                            Total Expense:
                                                        </td>
                                                        <td>
                                                            <span class="display_currency" data-currency_symbol="true">Rs.</span><span id="total_expense"></span>
                                                        </td>
                                                    </tr>
                                                    <tr style="border-top: 2px solid black">
                                                        <td>
                                                            Total:
                                                        </td>
                                                        <td>
                                                            <span class="display_currency" data-currency_symbol="true">Rs.</span><span id="grand_total"></span>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <div class="form-group">
                                                    <label for="closing_amount">Total Cash:*</label>
                                                    <input id="input_total" class="form-control input_number" required placeholder="Total Cash" min="0" name="closing_amount" type="number" value="70400">
                                                </div>
                                            </div>
                                            <div class="col-sm-12">
                                                <div class="form-group">
                                                    <label for="closing_note">Closing Note:</label>
                                                    <textarea class="form-control" placeholder="Closing Note" rows="3" name="note" cols="50"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                        <button type="submit" class="btn btn-primary">Submit</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-7">
                            <div class="card card-default collapsed-card">
                                <div class="card-header">
                                    <h3 class="card-title">List of product</h3>
                                    <div class="card-tools">
                                        <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                    <!-- /.card-tools -->
                                </div>
                                <!-- /.card-header -->
                                <div class="card-body" style="overflow-y: scroll;height: 20rem;">
                                    <div class="table-responsive">
                                        <table id="myTable" class="table table-striped">
                                            <thead>
                                                <tr>
                                                    <th>Sl.</th>
                                                    <th>Product Name</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr onclick="select( {&quot;id&quot;:2,&quot;product_id&quot;:2,&quot;code&quot;:{&quot;id&quot;:2,&quot;product_id&quot;:2,&quot;code&quot;:&quot;aas&quot;,&quot;created_at&quot;:&quot;2023-01-17T10:24:21.000000Z&quot;,&quot;updated_at&quot;:&quot;2023-01-17T10:24:21.000000Z&quot;,&quot;deleted_at&quot;:null},&quot;created_at&quot;:&quot;2023-01-17T10:24:21.000000Z&quot;,&quot;updated_at&quot;:&quot;2023-02-18T10:50:50.000000Z&quot;,&quot;deleted_at&quot;:null,&quot;name&quot;:&quot;elephant&quot;,&quot;description&quot;:&quot;aefad ads das d sad asd sa das d sa sa as das ds a&quot;,&quot;price&quot;:0,&quot;unit&quot;:-2.9900000000000002131628207280300557613372802734375,&quot;mrp&quot;:10000,&quot;min_mrp&quot;:null,&quot;ena&quot;:&quot;0.039&quot;,&quot;alert_quantity&quot;:20,&quot;warranty&quot;:0,&quot;status&quot;:1,&quot;category_id&quot;:0,&quot;sub_category_id&quot;:0,&quot;imagefile&quot;:&quot;8fd67fddfe06d22391f14d90591235f0.jpg&quot;,&quot;code_text&quot;:&quot;aas&quot;},2,' elephant' ,this)">
                                                    <td>1</td>
                                                    <td>elephant</td>
                                                </tr>
                                                <tr onclick="select( {&quot;id&quot;:1,&quot;product_id&quot;:1,&quot;code&quot;:{&quot;id&quot;:1,&quot;product_id&quot;:1,&quot;code&quot;:&quot;69886&quot;,&quot;created_at&quot;:&quot;2023-01-17T10:09:10.000000Z&quot;,&quot;updated_at&quot;:&quot;2023-01-17T10:09:10.000000Z&quot;,&quot;deleted_at&quot;:null},&quot;created_at&quot;:&quot;2023-01-17T10:09:10.000000Z&quot;,&quot;updated_at&quot;:&quot;2023-02-06T20:53:43.000000Z&quot;,&quot;deleted_at&quot;:null,&quot;name&quot;:&quot;Muhamassmad Qasim&quot;,&quot;description&quot;:null,&quot;price&quot;:100,&quot;unit&quot;:-7.95999999999999996447286321199499070644378662109375,&quot;mrp&quot;:100,&quot;min_mrp&quot;:100,&quot;ena&quot;:&quot;1232312&quot;,&quot;alert_quantity&quot;:50,&quot;warranty&quot;:0,&quot;status&quot;:1,&quot;category_id&quot;:0,&quot;sub_category_id&quot;:0,&quot;imagefile&quot;:&quot;&quot;,&quot;code_text&quot;:&quot;69886&quot;},1,' Muhamassmad Qasim' ,this)">
                                                    <td>2</td>
                                                    <td>Muhamassmad Qasim</td>
                                                </tr>
                                                <tr onclick="select( {&quot;id&quot;:4,&quot;product_id&quot;:4,&quot;code&quot;:{&quot;id&quot;:4,&quot;product_id&quot;:4,&quot;code&quot;:&quot;4&quot;,&quot;created_at&quot;:&quot;2023-02-22T09:41:49.000000Z&quot;,&quot;updated_at&quot;:&quot;2023-02-22T09:41:49.000000Z&quot;,&quot;deleted_at&quot;:null},&quot;created_at&quot;:&quot;2023-02-22T09:41:49.000000Z&quot;,&quot;updated_at&quot;:&quot;2023-02-22T09:41:49.000000Z&quot;,&quot;deleted_at&quot;:null,&quot;name&quot;:&quot;test&quot;,&quot;description&quot;:null,&quot;price&quot;:70,&quot;unit&quot;:null,&quot;mrp&quot;:70,&quot;min_mrp&quot;:70,&quot;ena&quot;:null,&quot;alert_quantity&quot;:1,&quot;warranty&quot;:0,&quot;status&quot;:1,&quot;category_id&quot;:0,&quot;sub_category_id&quot;:0,&quot;imagefile&quot;:&quot;bf8fb73bf31741acdeba53428ca9e540.jpg&quot;,&quot;code_text&quot;:&quot;4&quot;},4,' test' ,this)">
                                                    <td>3</td>
                                                    <td>test</td>
                                                </tr>
                                                <tr onclick="select( {&quot;id&quot;:3,&quot;product_id&quot;:3,&quot;code&quot;:{&quot;id&quot;:3,&quot;product_id&quot;:3,&quot;code&quot;:&quot;3&quot;,&quot;created_at&quot;:&quot;2023-02-09T02:35:53.000000Z&quot;,&quot;updated_at&quot;:&quot;2023-02-09T02:35:53.000000Z&quot;,&quot;deleted_at&quot;:null},&quot;created_at&quot;:&quot;2023-02-09T02:35:53.000000Z&quot;,&quot;updated_at&quot;:&quot;2023-02-09T02:36:07.000000Z&quot;,&quot;deleted_at&quot;:null,&quot;name&quot;:&quot;vv&quot;,&quot;description&quot;:null,&quot;price&quot;:0.8000000000000000444089209850062616169452667236328125,&quot;unit&quot;:0,&quot;mrp&quot;:0.8000000000000000444089209850062616169452667236328125,&quot;min_mrp&quot;:0.8000000000000000444089209850062616169452667236328125,&quot;ena&quot;:null,&quot;alert_quantity&quot;:3,&quot;warranty&quot;:0,&quot;status&quot;:1,&quot;category_id&quot;:0,&quot;sub_category_id&quot;:0,&quot;imagefile&quot;:&quot;&quot;,&quot;code_text&quot;:&quot;3&quot;},3,' vv' ,this)">
                                                    <td>4</td>
                                                    <td>vv</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <!-- /.card-body -->
                            </div>
                            <div class="card col-md-12">
                                <div class="card-body">
                                    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text">
                                                <i class="fa fa-barcode"></i>
                                            </span>
                                        </div>
                                        <input type="text" class="form-control" id="codenameinput" placeholder="Product with code or Name">
                                        <div class="input-group-append">
                                            <div class="input-group-text"><i class="fa fa-search"></i></div>
                                        </div>
                                        <ul id="searchResult" class="searchResult"></ul>
                                    </div>
                                </div>
                            </div>

                            <form method="POST" action="https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/admin/sale/storebyname" accept-charset="UTF-8" id="form"><input name="_token" type="hidden" value="uPdtEncQmMIRsjyI2cTJaPbOZIYvvMZRJ7RxpPqH">

                                <div class="card" style="height: 31rem">
                                    <div class="card-body">

                                        <h3 class="text-center text-danger " id="head_alert"></h3>

                                        <div class="table-responsive" style="overflow-y: scroll;height: 28rem;">
                                            <table class="table table-bordered table-head-fixed saleTable">
                                                <thead class="bg-extralight">
                                                    <tr>
                                                        <th class="text-nowrap text-center">Action</th>
                                                        <th class="text-nowrap text-center">Sl No</th>
                                                        <th>Articles Description</th>
                                                        <th class="text-right">Quantity</th>
                                                        <th class="text-right">Selling Price</th>
                                                        <th class="text-right">Amount</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="productTbody">
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="card">
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table id="sale_table" class="table table-bordered table-striped">
                                                <tbody>
                                                    <tr class="">
                                                        <td colspan="1" class="text-center ">Total</td>
                                                        <td colspan="2" class="text-center"><input class="form-control" name="sub_total" id="total_amount" value="0" type="number" min="0" step="0.01">&nbsp;
                                                            <span id="amountInWord" class="text-capitalize">Take in word</span>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="7">
                                                            <input class="d-none" name="user_id" value="1">
                                                            <input type="hidden" name="cheque_no" id="cheque_no" value="">
                                                            <input type="hidden" name="cheque_date" id="cheque_date" value="">
                                                            <input type="hidden" name="clearance_date" id="clearance_date" value="">
                                                            <input type="hidden" name="discount_amount" id="discount_amount" value="0">
                                                            <input type="hidden" name="receipt_id" id="receipt_id" value="">
                                                            <input type="hidden" name="receipt_details" id="receipt_details" value="">
                                                            <input type="hidden" name="total" id="total" value="">
                                                            <input type="hidden" name="checkedit" id="checkedit" value="0">
                                                            <div class="btn-group float-right">
                                                                <button type="button" name="invoice_draft" value="invoice_draft" id="invoice_draft" class="btn btn-warning"> <i class="fa fa-pen-square m-r-5"></i> <span>Draft</span></button>
                                                                <button onclick="return form_validation(this)" name="invoice_payment" value="invoice_payment" id="invoice_payment" class="btn btn-secondary"> <i class="fa fa-shopping-basket m-r-5"></i> <span>Invoice & Payment</span></button>
                                                                <button onclick="return form_validation(this)" name="invoice" value="invoice" class="btn btn-primary"> <i class="fa fa-shopping-basket m-r-5"></i> <span>Only Invoice</span></button>
                                                            </div>

                                                        </td>

                                                    </tr>
                                                </tbody>


                                            </table>
                                        </div>

                                    </div>
                                </div>
                        </div>
                        <div class="col-md-5 pb-2">

                            <div class="mb-2 text-center">
                                <button type="button" class="btn btn-sm btn-success" id="btnViewRegister">
                                    <span data-toggle="tooltip" data-placement="bottom" data-original-title="Register Details"><i class="fa fa-briefcase"></i> Register</span></button>
                                <button type="button" class="btn btn-sm btn-danger" id="btnCloseRegister">
                                    <span data-toggle="tooltip" data-placement="bottom" title="Close Register"><i class="fa fa-times"></i> Close Register</span>
                                </button>
                                <a href="../views/dashboard.php" data-toggle="tooltip" data-placement="bottom" data-original-title="Back to Invoice" class="btn btn-sm btn-primary"><i class="fa fa-backward"></i> Back</a>


                            </div>
                            <div class="card card-primary collapsed-card">
                                <div class="card-header">
                                    <div class="card-title">Your Recent Transactions</div>
                                    <div class="card-tools">
                                        <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
                                        </button>
                                    </div>
                                </div>


                                <!-- /.card-header -->
                                <!-- form start -->
                                <div class="card-body">
                                    <div class="card card-primary card-outline card-outline-tabs">
                                        <div class="card-header p-0 border-bottom-0">
                                            <ul class="nav nav-tabs" id="custom-tabs-three-tab" role="tablist">
                                                <li class="nav-item">
                                                    <a class="nav-link active" id="custom-paid-tab" data-toggle="pill" href="#custom-paid" role="tab" aria-controls="custom-paid" aria-selected="true"><i class="fa fa-check"></i>Paid</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a class="nav-link" id="custom-due-tab" data-toggle="pill" href="#custom-due" role="tab" aria-controls="custom-due" aria-selected="true"><i class="fa fa-check"></i>Due</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a class="nav-link" id="custom-draft-tab" data-toggle="pill" href="#custom-draft" role="tab" aria-controls="custom-draft" aria-selected="false"><i class="fa fa-terminal"></i>Draft</a>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="card-body">
                                            <div class="tab-content" id="custom-tabs-three-tabContent">
                                                <div class="tab-pane fade show active" id="custom-paid" role="tabpanel" aria-labelledby="custom-paid-tab">
                                                    <table class="table table-bordered table-striped" cellspacing="0" width="100%" id="finaltable">
                                                        <thead>
                                                            <th>Sl</th>
                                                            <th>Bill No</th>
                                                            <th>Amount</th>
                                                            <th>Action</th>
                                                        </thead>
                                                        <tbody>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <div class="tab-pane fade" id="custom-due" role="tabpanel" aria-labelledby="custom-due-tab">
                                                    <table class="table table-bordered table-striped" cellspacing="0" width="100%" id="duetable">
                                                        <thead>
                                                            <th>Sl</th>
                                                            <th>Bill No</th>
                                                            <th>Inv. Amount</th>
                                                            <th>Paid Amount</th>
                                                            <th><br> Due <br> Amount</th>
                                                            <th>Action</th>
                                                        </thead>
                                                        <tbody>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                <div class="tab-pane fade" id="custom-draft" role="tabpanel" aria-labelledby="custom-draft-tab">
                                                    <table class="table table-bordered table-striped" id="drafttable">
                                                        <thead>
                                                            <th>Sl</th>
                                                            <th>Bill No</th>
                                                            <th>Amount</th>
                                                            <th>Action</th>
                                                        </thead>
                                                        <tbody>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- /.card -->
                                    </div>

                                </div>
                                <!-- /.card-body -->
                            </div>
                            <div class="card">
                                <div class="card-body">

                                    <div class="input-group mb-3">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text">Customer<span style="color:red;">*</span></span>
                                        </div>
                                        <input type="text" class="form-control" autocomplete="off" value='' id="customer_mobile" placeholder="Customer Name or Mobile">
                                        <input type="hidden" id="customer_id" name="customer_id" value=''>

                                        <div class="input-group-append">
                                            <button type="button" class="input-group-text" data-toggle="modal" data-target="#modelId">
                                                <i class="fa fa-plus"></i>
                                            </button>
                                        </div>
                                        <ul id="searchResultCustomer"></ul>
                                    </div>
                                    <div class="row">

                                        <div class="col-md-6">
                                            <div class="input-group mb-3">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">Cus. Name<span style="color:red;">*</span></span>
                                                </div>
                                                <input id="cus_name" class="form-control" disabled="disabled" placeholder="Customer Name" name="cus_name" type="text" value="">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="input-group mb-3">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">Cus. Address</span>
                                                </div>
                                                <input id="cus_address" style="resize: none;font-size: 11px;" class="form-control" disabled="disabled" placeholder="Customer Address" name="cus_address" type="text" value="">
                                            </div>
                                        </div>

                                    </div>

                                    <div class="row" new>
                                        <div class="col-md-6">
                                            <div class="input-group mb-3">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">Date<span style="color:red;">*</span></span>
                                                </div>
                                                <input autocomplete="off" id="create_date" class="form-control mydatepicker " placeholder="Adress " name="date" type="text" value="2023-03-13">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="input-group mb-3">
                                                <div class="input-group-prepend">
                                                    <span class="input-group-text">Vat</span>
                                                </div>
                                                <select id="percentage" class=" form-control " name="percentage">
                                                    <option value="123">asdasd</option>
                                                    <option value="19">IVA</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <table class="table table-striped recieptdiv d-none mb-3">
                                        <tr>
                                            <td>Due/Balance Amount (Rs.)</td>
                                            <td>:</td>
                                            <td id="totalamount" class="text-right">0.0</td>
                                        </tr>
                                        <tr>
                                            <td>Current Invoice Amount (Rs.)<br><small> (incl. vat) </small></td>
                                            <td>:</td>
                                            <td id="currentTotalAmount" class="text-right">0.0</td>
                                        </tr>
                                        <tr style="border-top: 3px solid black">
                                            <td>Payment (Rs.)</td>
                                            <td>:</td>
                                            <td id="currentPaymentAmount" class="text-right">0.0</td>
                                        </tr>
                                        <tr>
                                            <td>Discount (Rs.)</td>
                                            <td>:</td>
                                            <td id="currentDiscountAmount" class="text-right">0.0</td>
                                        </tr>
                                        <tr style="border-top: 3px solid black">
                                            <th>Grand Total (Rs.)</th>
                                            <th>:</th>
                                            <td id="grandtotalamount" class="text-right">0.0</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>

                        </div>
                    </div>
                    </form>


                </div>
                <!-- Button trigger modal -->

                <div class="modal fade" id="paymentmodal" tabindex="-1" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">
                    <div class="modal-dialog modal-lg" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Total Receipt</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <form id="confirmForm" action="">
                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-md-9">
                                            <div class="card">
                                                <div class="card-body">
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <div class="form-group  ">
                                                                <label class="control-label ">Bill Amount:<span style="color:red;">*</span></label>
                                                                <input id="bill_amount" class="form-control " min="0" name="bill_amount" type="number" value="0.0">
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="form-group  ">
                                                                <label class="control-label ">Discount Amount:</label>
                                                                <input id="discount" class="form-control " min="0" name="discount" type="number" value="0.0">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <div class="form-group  ">
                                                                <label class="control-label ">Paying Amount:<span style="color:red;">*</span></label>
                                                                <input id="total_bill" class="form-control " min="0" name="total_bill" type="number" value="0">
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="form-group  ">
                                                                <label class="control-label ">Due Amount:<span style="color:red;">*</span></label>
                                                                <input id="due_amount" class="form-control " min="0" name="due_amount" type="number" value="0">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-12">
                                                        <div class="form-group  ">
                                                            <label class="control-label ">Payment Note: </label>
                                                            <textarea id="details" class="form-control " rows="2" cols="5" name="details"></textarea>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="card card-solid">
                                                <div class="card-body card-deck" style="font-size: 11px;">
                                                    <div class="col-md-12">
                                                        <strong>
                                                            Total Items:
                                                        </strong>
                                                        <br>
                                                        <span class="lead text-bold total_quantity">0</span>
                                                    </div>

                                                    <div class="col-md-12">
                                                        <hr>
                                                        <strong>
                                                            Old Due/Balance:
                                                        </strong>
                                                        <br>
                                                        <span class="lead text-bold total_duebalance_span" style="color: #d81b60;font-size:16px">0.00</span> +
                                                        <span class="lead text-bold total_payable_span" style="color: #d81b60;font-size:16px">0.00</span> <br>=
                                                        <span class="lead text-bold grand_total_payable_span" style="color: #fd7e14;">0.00</span>
                                                    </div>

                                                    <div class="col-md-12">
                                                        <hr>
                                                        <strong>
                                                            Total Payment:
                                                        </strong>
                                                        <br>
                                                        <span class="lead text-bold total_payment_span" style="color: #28a745;">0.00</span>
                                                    </div>
                                                    <div class="col-md-12">
                                                        <hr>
                                                        <strong>
                                                            Discount Amount:
                                                        </strong>
                                                        <br>
                                                        <span class="lead text-bold discount_amount_span" style="color: #fd7e14;">0.00</span>
                                                    </div>


                                                    <div class="col-md-12" style="border-top: 3px solid black">
                                                        <hr>
                                                        <strong>
                                                            Due Amount:
                                                        </strong>
                                                        <br>
                                                        <span class="lead text-bold balance_due_span" style="color: #d81b60;font-size:16px">0.00</span>
                                                    </div>



                                                </div>
                                                <!-- /.box-body -->
                                            </div>
                                        </div>
                                    </div>


                                </div>
                                <div class="modal-footer">
                                    <button type="button" id="confirm_account" class="btn btn-primary">Confirm</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- Modal -->
                <div class="modal fade" id="modelId" tabindex="-1" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Customer Entry</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <div class="row">
                                    <div class="col-md-12 d-flex justify-content-center">
                                        <div class="col-md-12">
                                            <!-- form start -->
                                            <div class="">
                                                <form id="formCustomer" method="POST" enctype="multipart/form-data">
                                                    <div class="col-md-12">
                                                        <div class="form-group text-right">
                                                            <button type="submit" id="cus_store_btn" class="btn btn-sm btn-primary">Submit</button>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-6">
                                                            <div class="form-group  clear">
                                                                <label class="control-label clear">Name<span style="color:red;">*</span></label>
                                                                <input class="form-control" id="name" required="required" name="name" type="text" value="">
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            <div class="form-group  clear">
                                                                <label class="control-label clear">Mobile<span style="color:red;">*</span></label>
                                                                <input class="form-control" id="mobile" required="required" name="mobile" type="text" value="">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="form-group  clear">
                                                        <label class="control-label clear">Email</label>
                                                        <input class="form-control" id="email" name="email" type="email" value="">
                                                    </div>
                                                    <div class="form-group  clear">
                                                        <label class="control-label clear">Address<span style="color:red;">*</span></label>
                                                        <textarea class="form-control" id="address" rows="3" required="required" name="address" cols="50"></textarea>
                                                    </div>
                                                    <div class="form-group   ">
                                                        <label class="control-label clear"> Gender</label>
                                                        <select id="gender" class="form-control" name="gender">
                                                            <option value="1">Male</option>
                                                            <option value="2">Female</option>
                                                            <option value="3">Other</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group  clear">
                                                        <label class="control-label clear">NID</label>
                                                        <input class="form-control" id="nid" name="nid" type="text" value="">
                                                    </div>
                                                    <div class="form-group  clear">
                                                        <label class="control-label clear">Opening Balance</label>
                                                        <input class="form-control" min="0" name="opening_balance" type="number" value="0">
                                                    </div>
                                                    <div class="form-group   ">
                                                        <label class="control-label clear"> Recipt Type</label>
                                                        <select id="receipt_type" class="form-control" name="receipt_type">
                                                            <option value="2">Bill to Bill</option>
                                                            <option value="1">Ledger</option>
                                                        </select>
                                                    </div>

                                                </form>
                                                <!-- /.card-body -->
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>



                    <!-- start - This is for export functionality only -->
                    <!-- end - This is for export functionality only -->
                    <script>
                        function readImageURL(input) {
                            if (input.files && input.files[0]) {
                                var reader = new FileReader();
                                reader.onload = function(e) {
                                    $("#view_uploading_img").removeClass('d-none');
                                    $('#view_uploading_img_src').attr('src', e.target.result);
                                }
                                $(input).parent().children().eq(1).html(input.files[0].name);

                                reader.readAsDataURL(input.files[0]);
                            }
                        }

                        $(document).ready(function() {
                            $("#total_bill").focus(function() {
                                $(this).select();
                            });
                            $("#discount").focus(function() {
                                $(this).select();
                            });
                        });
                    </script>
                    <script type="text/javascript">
                        var i = 0;
                        var products = [{
                            "id": 2,
                            "product_id": 2,
                            "code": {
                                "id": 2,
                                "product_id": 2,
                                "code": "aas",
                                "created_at": "2023-01-17T10:24:21.000000Z",
                                "updated_at": "2023-01-17T10:24:21.000000Z",
                                "deleted_at": null
                            },
                            "created_at": "2023-01-17T10:24:21.000000Z",
                            "updated_at": "2023-02-18T10:50:50.000000Z",
                            "deleted_at": null,
                            "name": "elephant",
                            "description": "aefad ads das d sad asd sa das d sa sa as das ds a",
                            "price": 0,
                            "unit": -2.9900000000000002131628207280300557613372802734375,
                            "mrp": 10000,
                            "min_mrp": null,
                            "ena": "0.039",
                            "alert_quantity": 20,
                            "warranty": 0,
                            "status": 1,
                            "category_id": 0,
                            "sub_category_id": 0,
                            "imagefile": "8fd67fddfe06d22391f14d90591235f0.jpg",
                            "code_text": "aas"
                        }, {
                            "id": 1,
                            "product_id": 1,
                            "code": {
                                "id": 1,
                                "product_id": 1,
                                "code": "69886",
                                "created_at": "2023-01-17T10:09:10.000000Z",
                                "updated_at": "2023-01-17T10:09:10.000000Z",
                                "deleted_at": null
                            },
                            "created_at": "2023-01-17T10:09:10.000000Z",
                            "updated_at": "2023-02-06T20:53:43.000000Z",
                            "deleted_at": null,
                            "name": "Muhamassmad Qasim",
                            "description": null,
                            "price": 100,
                            "unit": -7.95999999999999996447286321199499070644378662109375,
                            "mrp": 100,
                            "min_mrp": 100,
                            "ena": "1232312",
                            "alert_quantity": 50,
                            "warranty": 0,
                            "status": 1,
                            "category_id": 0,
                            "sub_category_id": 0,
                            "imagefile": "",
                            "code_text": "69886"
                        }, {
                            "id": 4,
                            "product_id": 4,
                            "code": {
                                "id": 4,
                                "product_id": 4,
                                "code": "4",
                                "created_at": "2023-02-22T09:41:49.000000Z",
                                "updated_at": "2023-02-22T09:41:49.000000Z",
                                "deleted_at": null
                            },
                            "created_at": "2023-02-22T09:41:49.000000Z",
                            "updated_at": "2023-02-22T09:41:49.000000Z",
                            "deleted_at": null,
                            "name": "test",
                            "description": null,
                            "price": 70,
                            "unit": null,
                            "mrp": 70,
                            "min_mrp": 70,
                            "ena": null,
                            "alert_quantity": 1,
                            "warranty": 0,
                            "status": 1,
                            "category_id": 0,
                            "sub_category_id": 0,
                            "imagefile": "bf8fb73bf31741acdeba53428ca9e540.jpg",
                            "code_text": "4"
                        }, {
                            "id": 3,
                            "product_id": 3,
                            "code": {
                                "id": 3,
                                "product_id": 3,
                                "code": "3",
                                "created_at": "2023-02-09T02:35:53.000000Z",
                                "updated_at": "2023-02-09T02:35:53.000000Z",
                                "deleted_at": null
                            },
                            "created_at": "2023-02-09T02:35:53.000000Z",
                            "updated_at": "2023-02-09T02:36:07.000000Z",
                            "deleted_at": null,
                            "name": "vv",
                            "description": null,
                            "price": 0.8000000000000000444089209850062616169452667236328125,
                            "unit": 0,
                            "mrp": 0.8000000000000000444089209850062616169452667236328125,
                            "min_mrp": 0.8000000000000000444089209850062616169452667236328125,
                            "ena": null,
                            "alert_quantity": 3,
                            "warranty": 0,
                            "status": 1,
                            "category_id": 0,
                            "sub_category_id": 0,
                            "imagefile": "",
                            "code_text": "3"
                        }];
                        var customers = [{
                            "id": 1,
                            "name": "vxcbxcb",
                            "address": "dvxcvcxv",
                            "gender": 1,
                            "nid": null,
                            "email": null,
                            "vat_no": null,
                            "opening_balance": null,
                            "due_amount": null,
                            "mobile": "32432432",
                            "user_id": 1,
                            "receipt_type": 2,
                            "status": 1,
                            "created_at": "2023-02-05T19:53:22.000000Z",
                            "updated_at": "2023-02-05T19:53:22.000000Z",
                            "deleted_at": null
                        }, {
                            "id": 2,
                            "name": "rwerwer",
                            "address": "rtewrwer",
                            "gender": 1,
                            "nid": null,
                            "email": null,
                            "vat_no": null,
                            "opening_balance": null,
                            "due_amount": null,
                            "mobile": "45435345",
                            "user_id": 1,
                            "receipt_type": 2,
                            "status": 1,
                            "created_at": "2023-02-06T20:53:21.000000Z",
                            "updated_at": "2023-02-06T20:53:21.000000Z",
                            "deleted_at": null
                        }];
                        var page_no = Math.round($('.dell_quantity').length / 30);
                        var temProducts = [];
                        var invoice1 = '';
                        var action1 = '';
                        invoice1 = '';
                        action1 = '';
                        payment = 0;
                        $(document).ready(function() {

                            $('#confirmForm').validate({ // initialize the plugin
                                rules: {
                                    bill_amount: {
                                        required: true,
                                    },
                                    total_bill: {
                                        required: true,
                                    },
                                    due_amount: {
                                        required: true,
                                    },
                                    ledger: {
                                        required: true,
                                    }
                                }
                            });

                            $.ajax({
                                type: 'get',
                                url: '../../routes/data_to_pos.php',
                                success: function(data) {
                                    let response = JSON.parse(data);
                                    products = response;
                                    console.log(response);
                                    if (response.success) {
                                        Notifications.success(response.msg);
                                    } else {
                                        Notifications.errorMsg(response.msg)
                                    }
                                },
                                error: function(xhr, error, errorThrown) {
                                    console.log(xhr.error);
                                }
                            })

                            $('#confirm_account').on('click', function(e) {
                                if (!$("#confirmForm").valid()) {
                                    $(e).preventDefault();

                                } else {
                                    if ($("#total_amount").val() > 0) {
                                        $('#checkedit').val(2);

                                        $("#discount_amount").val($("#discount").val());
                                        $("#total").val($("#total_bill").val());
                                        $("#cheque_no").val($("#cheque_n").val());
                                        $("#cheque_date").val($("#cheque_d").val());
                                        $("#clearance_date").val($("#clearance_d").val());
                                        $("#receipt_details").val($("#details").val());
                                        $('#paymentmodal').modal('hide');
                                        grandTotalShow();
                                        /////////
                                        if (invoice1.receipt) {
                                            $("#discount_amount").val(parseFloat(invoice1.receipt.discount) + parseFloat($('#discount').val()));
                                            $("#total").val(parseFloat(invoice1.receipt.total) + parseFloat($('#total_bill').val()));
                                        }
                                        $("#invoice_payment").click();
                                    }
                                }
                            });
                            $('#drafttable').DataTable({
                                "destroy": true,
                                "processing": true,
                                "bSort": false,
                                "paging": true,
                                "pageLength": 5,
                                "aLengthMenu": [
                                    [5, 10, 25, 50, 100],
                                    [5, 10, 50, 100, "All"]
                                ],
                                "iDisplayLength": 5,
                            });
                            $('#duetable').DataTable({
                                "destroy": true,
                                "processing": true,
                                "bSort": false,
                                "paging": true,
                                "pageLength": 5,
                                "aLengthMenu": [
                                    [5, 10, 25, 50, 100],
                                    [5, 10, 50, 100, "All"]
                                ],
                                "iDisplayLength": 5,
                            });
                            $('#finaltable').DataTable({
                                "destroy": true,
                                "processing": true,
                                "bSort": false,
                                "paging": true,
                                "pageLength": 5,
                                "aLengthMenu": [
                                    [5, 10, 25, 50, 100],
                                    [5, 10, 50, 100, "All"]
                                ],
                                "iDisplayLength": 5,
                            });
                            $('#invoice_draft').on('click', function() {
                                $.ajax({
                                    method: "POST",
                                    url: "https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/admin/sale-storedraft",
                                    data: $('#form').serialize(),
                                    success: function(response) {
                                        console.log(response);
                                        location.reload("https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/admin//sale/createbyname");
                                    }
                                });
                            });
                            $('.slim-scroll').slimScroll({
                                // color: '#00f',
                                size: '5px',
                                height: '53rem',
                                alwaysVisible: true
                            });
                            $('#myTable').dataTable({
                                paging: true,
                                searching: true
                            });
                            $('#invoice_payment').on('click', function() {
                                if (!$("#customer_mobile").val()) {
                                    var returnVal = alert("Select Customer");
                                    $(this).prop("checked", returnVal);
                                    $(this).prop('checked', false);
                                    $("#customer_mobile").focus();
                                    return false;
                                } else {

                                    if (!$("#percentage").val()) {
                                        var percentageVal = alert("Select Vat");
                                        $(this).prop("checked", percentageVal);
                                        $(this).prop('checked', false);
                                        $("#percentage").focus();
                                        return false;
                                    } else {
                                        if (invoice1) {
                                            var total_payable = parseFloat($('#total_amount').val());

                                            //                            $('#bill_amount').val(total_payable);
                                            //                            $('#total_bill').val(total_payable);
                                            //                            $('.total_duebalance_span').html('৳ '+(($('#totalamount').html())?$('#totalamount').html():'0.00'));
                                            //                            $('.total_payable_span').html('৳ '+((total_payable)?total_payable:'0.00'));
                                            //                            $('.total_paying').html('৳ '+((total_payable)?total_payable:'0.00'));
                                            //                            var item  = 0;
                                            //                            for (let index = 0; index < $('#productTbody').children().length; index++) {
                                            //                                // console.log($('#productTbody').children().eq(index).children().eq(3));
                                            //                                item += parseInt($('#productTbody').children().eq(index).children().eq(5).find('input').val());
                                            //                            }
                                            //                            $('.total_quantity').html(item);
                                            //
                                            //                            $('#paymentmodal').modal('show');
                                            //                            calculatePayment();



                                            if (invoice1.receipt) {
                                                $('#bill_amount').val(total_payable - payment);
                                                $('#total_bill').val(total_payable - payment);
                                                $('#discount').val(0);
                                                $('#due_amount').val(0);

                                                var item = 0;
                                                for (let index = 0; index < $('#productTbody').children().length; index++) {
                                                    // console.log($('#productTbody').children().eq(index).children().eq(3));
                                                    item += parseInt($('#productTbody').children().eq(index).children().eq(5).find('input').val());
                                                }
                                                $('.total_quantity').html(item);
                                                calculatePayment();
                                                $('#paymentmodal').modal('show');
                                            } else {
                                                if ($('#customer_receipt_type_id') == 1) {
                                                    var total_payable = parseFloat($("#totalamount").html()) + parseFloat($('#total_amount').val());
                                                } else {
                                                    var total_payable = parseFloat($('#total_amount').val());
                                                }
                                                $('#bill_amount').val(total_payable - payment);
                                                $('#total_bill').val(total_payable - payment);
                                                $('#discount').val(0);
                                                $('#due_amount').val(0);


                                                var item = 0;
                                                for (let index = 0; index < $('#productTbody').children().length; index++) {
                                                    // console.log($('#productTbody').children().eq(index).children().eq(3));
                                                    item += parseInt($('#productTbody').children().eq(index).children().eq(5).find('input').val());
                                                }
                                                $('.total_quantity').html(item);
                                                calculatePayment();
                                                $('#paymentmodal').modal('show');
                                            }
                                        } else {
                                            var total_payable = parseFloat($('#total_amount').val());

                                            $('#bill_amount').val(total_payable);
                                            $('#total_bill').val(total_payable);

                                            $('.total_duebalance_span').html('৳ ' + (($('#totalamount').html()) ? $('#totalamount').html() : '0.00'));
                                            $('.total_payable_span').html('৳ ' + ((total_payable) ? total_payable : '0.00'));
                                            $('.total_paying').html('৳ ' + ((total_payable) ? total_payable : '0.00'));
                                            var item = 0;
                                            for (let index = 0; index < $('#productTbody').children().length; index++) {
                                                // console.log($('#productTbody').children().eq(index).children().eq(3));
                                                item += parseInt($('#productTbody').children().eq(index).children().eq(5).find('input').val());
                                            }
                                            $('.total_quantity').html(item);

                                            $('#paymentmodal').modal('show');
                                            calculatePayment();
                                        }
                                    }

                                }

                            });
                            $("#bill_amount").keyup(function() {
                                calculatePayment();
                            });
                            $("#discount").keyup(function() {
                                calculatePayment();
                            });
                            $("#total_bill").keyup(function() {
                                calculatePayment();
                            });
                            $("#formCustomer").submit(function(event) {
                                event.preventDefault();
                                $.ajax({
                                    method: "post",
                                    url: "https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/admin/customer/storecusajax",
                                    data: {
                                        _token: "uPdtEncQmMIRsjyI2cTJaPbOZIYvvMZRJ7RxpPqH",
                                        name: $("#name").val(),
                                        address: $("#address").val(),
                                        gender: $("#gender").val(),
                                        nid: $("#nid").val(),
                                        email: $("#email").val(),
                                        mobile: $("#mobile").val(),
                                        receipt_type: $("#receipt_type").val(),
                                    },
                                    success: function(response, textStatus, jqXHR) {
                                        $('#formCustomer').trigger("reset");
                                        customers = response.customers;
                                        selectSearchCustomer(response.customer.id, response.customer.name, response.customer.address);
                                        // console.log(customers);
                                        $('#modelId').modal('hide');
                                    }
                                });
                            });

                            $('#confirmreceipt').change(function() {
                                if (!$("#customer_id").val()) {
                                    var returnVal = alert("Select Customer");
                                    $(this).prop("checked", returnVal);
                                    $(this).prop('checked', false);
                                    $("#customer_mobile").focus();
                                    return false;
                                }
                                if (this.checked) {
                                    CustomerReceiptCheck();
                                    $(this).prop("checked", returnVal);
                                } else {
                                    $('.recieptdiv').addClass('d-none');

                                }
                                // $('#textbox1').val(this.checked);
                            });
                            $("tbody").on('click', 'input.productinput', function() {
                                console.log('called');

                                $(".productinput").each(function() {
                                    if ($(this).is(":checked")) {
                                        $("#multi_delete").css('display', 'inline-block');
                                        return false;
                                    } else {
                                        $("#multi_delete").css('display', 'none');
                                    }
                                });
                            });
                        });


                        $('#btnCloseRegister').on('click', function() {
                            $.ajax({
                                method: "GET",
                                url: "https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/admin/get-closing-data",
                                success: function(response) {
                                    console.log(response);
                                    $('#opening_balance').html(response.cash_on_hand);
                                    $('#total_sale').html(response.total_sale);
                                    $('#total_receipt').html(response.total_receipt);
                                    $('#total_due').html(response.total_due);
                                    $('#total_payment').html(response.total_payment);
                                    $('#total_expense').html(response.total_expense);
                                    $('#grand_total').html(response.total_remaining);
                                    $('#input_total').val(response.total_remaining);
                                }
                            });
                            $('#close_register_modal').modal('show');
                        });

                        $('#btnViewRegister').on('click', function() {
                            $.ajax({
                                method: "GET",
                                url: "https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/admin/get-closing-data",
                                success: function(response) {
                                    console.log(response);
                                    $('#opening_balance1').html(response.cash_on_hand);
                                    $('#total_sale1').html(response.total_sale);
                                    $('#total_receipt1').html(response.total_receipt);
                                    $('#total_due1').html(response.total_due);
                                    $('#total_payment1').html(response.total_payment);
                                    $('#total_expense1').html(response.total_expense);
                                    $('#grand_total1').html(response.total_remaining);
                                }
                            });
                            $('#view_register_modal').modal('show');
                        });
                        $("#multi_delete").click(function() {


                            var ids = [];
                            $(".productinput").each(function() {
                                if ($(this).is(":checked")) {
                                    ids.push(parseInt($(this).val()));
                                }
                            });
                            console.log(ids);

                            ids.forEach(element => {
                                removeSale(element);
                                $("#checkbox_" + element).removeAttr("checked");
                                $("#multi_delete").css('display', 'none');
                            });

                        });
                        $('#codenameinput').on('input', function() {
                            var company_id = $("#company_id").val();
                            var filteredProducts = [];
                            // console.log(products);
                            if (!$('#codenameinput').val()) {
                                $("#searchResult").empty();
                            } else {
                                filteredProducts = products.filter(function(item) {
                                    // console.log(item.id,item.code_text);
                                    // return item.name.toLowerCase().match($('#codenameinput').val().toLowerCase());
                                    return item.name.toLowerCase().match($('#codenameinput').val().toLowerCase()) || item.code_text.match($('#codenameinput').val());
                                });
                                $("#searchResult").empty();
                                var len = filteredProducts.length;
                                for (var i = 0; i < len; i++) {
                                    var id = filteredProducts[i]['id'];
                                    var name = filteredProducts[i]['name'];

                                    $("#searchResult").append(`<li class='${(i==0)?'selected':''}' onclick="selectSearch(${id},'${name}', ${filteredProducts[i]['code_text']},${filteredProducts[i]['mrp']},${filteredProducts[i]['min_mrp']},this)" value='${id}'>Code: ${filteredProducts[i]['code_text']} - ${name}</li>`);

                                }
                            }
                        });
                        $('#codenameinput').on('keydown', function(e) {
                            if (e.keyCode == 13) {
                                e.preventDefault();

                                var selected = $(".selected");
                                selected.click();
                            }
                            if (e.keyCode == 38) { // up
                                var selected = $(".selected");
                                $(".searchResult li").removeClass("selected");
                                if (selected.prev().length == 0) {
                                    selected.siblings().last().addClass("selected");
                                } else {

                                    selected.prev().addClass("selected");
                                }
                            }
                            if (e.keyCode == 40) { // down
                                var selected = $(".selected");
                                $(".searchResult li").removeClass("selected");
                                if (selected.next().length == 0) {
                                    selected.siblings().first().addClass("selected");
                                } else {
                                    selected.next().addClass("selected");
                                }
                            }
                        });
                        $('#customer_mobile').on('input', function() {
                            var filteredCustomers = [];
                            if (!$('#customer_mobile').val()) {
                                $("#searchResultCustomer").empty();
                            } else {
                                filteredCustomers = customers.filter(function(item) {
                                    // console.log(item.id,item.code_text);
                                    // return item.name.toLowerCase().match($('#codenameinput').val().toLowerCase());
                                    return item.name.toLowerCase().match($('#customer_mobile').val().toLowerCase()) || item.mobile.match($('#customer_mobile').val());
                                });
                                $("#searchResultCustomer").empty();
                                var len = filteredCustomers.length;
                                for (var i = 0; i < len; i++) {
                                    var id = filteredCustomers[i]['id'];
                                    var name = filteredCustomers[i]['name'];
                                    var mobile = filteredCustomers[i]['mobile'];
                                    var address = filteredCustomers[i]['address'];

                                    $("#searchResultCustomer").append(`<li  onclick="selectSearchCustomer(${id},'${name}','${address}')" value='${id}'>${name} (${mobile})</li>`);

                                }
                            }
                        });
                        $('#percentage').on('change', function(e) {
                            grandTotalShow();
                        });

                        function removeTr(e) {
                            $(e).parent().parent().remove();

                            changeSumTotal();
                            var newI = 1;

                            for (let index = $('#productTbody').children().length - 1; index >= 0; index--) {

                                $('#productTbody').children().eq(index).children().eq(3).html(newI);
                                $('#productTbody').children().eq(index).children().eq(5).find('input').attr('id', 'dell_quantity_' + newI);
                                $('#productTbody').children().eq(index).children().eq(5).find('input').attr('onkeydown', `if (event.keyCode == 13){return nextrow(${newI},event,'dell_quantity');}`);
                                $('#productTbody').children().eq(index).children().eq(6).find('input').attr('id', 'unit_price_' + newI);
                                $('#productTbody').children().eq(index).children().eq(6).find('input').attr('onkeydown', `if (event.keyCode == 13){return nextrow(${newI},event,'unit_price');}`);
                                $('#productTbody').children().eq(index).children().eq(7).find('input').attr('id', 'total_amount_' + newI);
                                $('#productTbody').children().eq(index).children().eq(7).find('input').attr('onkeydown', `if (event.keyCode == 13){return nextrow(${newI},event,'total_amount');}`);

                                ++newI;
                            }

                            i = $('#productTbody').children().length;

                        }

                        function searchArray(id, myArray) {
                            for (var i = 0; i < myArray.length; i++) {
                                if ($(myArray[i]).children().eq(0).val() == id) {
                                    return true;
                                }
                            }
                        }

                        function selectSearchCustomer(id, name, address) {
                            $("#searchResultCustomer").empty();
                            $('#customer_mobile').val(name);
                            $('#cus_name').val(name);
                            $('#cus_address').val(address);
                            $('#customer_id').val(id);
                            $('#confirmreceipt').prop('checked', false);
                            $('.recieptdiv').addClass('d-none');
                            CustomerReceiptCheck();
                        }

                        function CustomerReceiptCheck() {
                            $.ajax({
                                method: "get",
                                url: "https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/admin/customer/check_receipt_type",
                                data: {
                                    customer_id: $("#customer_id").val(),
                                },
                                success: function(response, textStatus, jqXHR) {
                                    $('.recieptdiv').removeClass('d-none');
                                    $('#totalamount').addClass('text-right');
                                    $('#totalamount').html(((response.total) ? response.total : '0'));
                                    grandTotalShow();

                                    if (invoice1 && payment != 0) {
                                        $('#totalamount').html(parseFloat($('#totalamount').html()) - (parseFloat($('#currentTotalAmount').html()) - parseFloat($('#currentPaymentAmount').html())));
                                    } else {
                                        $('#totalamount').html(parseFloat($('#totalamount').html()) - (parseFloat($('#currentTotalAmount').html())));
                                    }


                                    if (invoice1.receipt) {
                                        $('#grandtotalamount').html(parseFloat($('#totalamount').html()) + parseFloat($('#total_amount').val()) - parseFloat($('#total_bill').val()) - parseFloat($('#discount').val()) - payment);
                                    } else {
                                        $('#grandtotalamount').html(parseFloat($('#totalamount').html()) + parseFloat($('#total_amount').val()) - parseFloat($('#total_bill').val()) - parseFloat($('#discount').val()));
                                    }
                                }
                            });
                        }

                        function selectSearch(id, name, code, unitprice, min_mrp, event) {
                            $("#searchResult").empty();
                            $('#codenameinput').val('');
                            var company_id = $("#company_id").val();
                            setting_id = $("#setting_id").val();
                            //console.log(product[setting_id]);
                            if (id) {
                                var copyProduct = searchArray(id, $('#productTbody').children());
                                if (copyProduct) {
                                    alert(name + " already in the invoice!");
                                    $('.dell_quantity_' + id).focus();
                                } else {
                                    var productTr = `<tr>
                                <input type="hidden" id="product_id_${id}" name="product[]" value="${id}">
                                <input type="hidden" id="code_${id}" name="code[]" value="${code}">

                                <td class="text-center">
                                   <a href="#" data-toggle="tooltip" class="btn btn-xs btn-default btn-circle" onclick="removeTr(this)" data-original-title="Close"> <i class="fa fa-times text-danger"></i> </a>
                                </td>
                                <td class="text-center">
                                    ${++i}
                                </td>
                                <td>
                                   ${name}
                                   <div class="text-center">
                                   <span class="badge badge-success">
                                     ${code}
                                   </span>
                                   </div>

                                </td>
                                <td class="text-right">
                                    <input type="number" class="form-control dell_quantity_${id}" oninput="sumTotal(${i});" name="dell_quantity[]" value="" min="0" onkeydown="if (event.keyCode == 13){return nextrow(${i},event,'dell_quantity');}" id="dell_quantity_${i}" style="text-align: right">
                                   <label class="text-danger text-center text_alert"></label>

                                </td>
                                <td class="text-right">
                                   <input type="number" class="form-control" oninput="sumTotal(${i});" name="unit_price[]" value="${unitprice}" min="${(min_mrp)?min_mrp:'0'}" onkeydown="if (event.keyCode == 13){return nextrow(${i},event,'unit_price');}" id="unit_price_${i}" style="text-align: right">
                                   <label class="text-danger text-center text_alert"></label>

                                </td>
                                <td class="text-right">
                                   <input type="number" class="form-control total_amount" name="total_amount[]" value="0" min="0" onkeydown="if (event.keyCode == 13){return nextrow(${i},event,'total_amount');}" id="total_amount_${i}" style="text-align: right">
                                   <label class="text-danger text-center text_alert"></label>

                                </td>
                           </tr>`;
                                    event.remove();
                                    $('#productTbody').prepend(productTr);
                                }



                            } else {
                                $('#code__' + i).html('');
                                $('#articles_description_' + i).html('');
                                $('#dell_quantity_' + i).val('');
                                $('#unit_price_' + i).val('');
                                $('#total_amount_' + i).val('');
                                $('#dell_quantity_' + i).attr("disabled", "disabled");
                                $('#unit_price_' + i).attr("disabled", "disabled");
                                $('#total_amount_' + i).attr("disabled", "disabled");
                            }
                        }

                        function select(product, id, name, event) {
                            var company_id = $("#company_id").val();
                            setting_id = $("#setting_id").val();
                            //console.log(product[setting_id]);
                            if (id) {
                                var copyProduct = searchArray(id, $('#productTbody').children());
                                if (copyProduct) {
                                    alert(name + " already in the invoice!");
                                    $('.dell_quantity_' + id).focus();
                                } else {
                                    var productTr = `<tr>
                            <input type="hidden" id="product_id_${id}" name="product[]" value="${id}">
                            <input type="hidden" id="code_${id}" name="code[]" value="${product.code.code}">

                            <td class="text-center">
                                <a href="#" data-toggle="tooltip" class="btn btn-xs btn-default btn-circle" onclick="removeTr(this)" data-original-title="Close"> <i class="fa fa-times text-danger"></i> </a>
                            </td>
                            <td class="text-center">
                                ${++i}
                            </td>
                            <td>
                                ${name}
                                <div class="text-center">
                                <span class="badge badge-success">
                                    ${product.code.code}
                                </span>
                                </div>

                            </td>
                            <td class="text-right">
                                <input type="number" class="form-control dell_quantity_${id}" oninput="sumTotal(${i});" name="dell_quantity[]" value="0" min="0" onkeydown="if (event.keyCode == 13){return nextrow(${i},event,'dell_quantity');}" id="dell_quantity_${i}" style="text-align: right">
                                <label class="text-danger text-center text_alert"></label>

                            </td>
                            <td class="text-right">
                                <input type="number" class="form-control" oninput="sumTotal(${i});" name="unit_price[]" value="${product.mrp}" min="${(product.min_mrp)?product.min_mrp:'0'}" onkeydown="if (event.keyCode == 13){return nextrow(${i},event,'unit_price');}" id="unit_price_${i}" style="text-align: right">
                                <label class="text-danger text-center text_alert"></label>

                            </td>
                            <td class="text-right">
                                <input type="number" class="form-control total_amount" name="total_amount[]" value="0" min="0" onkeydown="if (event.keyCode == 13){return nextrow(${i},event,'total_amount');}" id="total_amount_${i}" style="text-align: right">
                                <label class="text-danger text-center text_alert"></label>

                            </td>
                        </tr>`;
                                    event.remove();
                                    $('#productTbody').prepend(productTr);
                                }

                            } else {
                                $('#code__' + i).html('');
                                $('#articles_description_' + i).html('');
                                $('#dell_quantity_' + i).val('');
                                $('#unit_price_' + i).val('');
                                $('#total_amount_' + i).val('');
                                $('#dell_quantity_' + i).attr("disabled", "disabled");
                                $('#unit_price_' + i).attr("disabled", "disabled");
                                $('#total_amount_' + i).attr("disabled", "disabled");
                            }
                        }

                        function sumTotal(id) {
                            var unit_price = Math.round($('#unit_price_' + id).val() * 100) / 100;
                            var total = $('#dell_quantity_' + id).val() * unit_price;
                            total = Math.round(total * 100) / 100;
                            $('#total_amount_' + id).val(total);
                            $('#unit_price_' + id).val(unit_price);
                            // $('#unit_price_' + id).attr("value", unit_price);
                            // $('#total_amount_' + id).attr("value", total);
                            changeSumTotal();

                        }



                        function deleteInfo(id, e) {

                            if (confirm("Are you sure to delete it?")) {
                                $.ajax({
                                    url: "https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/admin/invoice" + '/' + id,
                                    method: 'DELETE',
                                    type: 'POST',
                                    data: {
                                        _token: "uPdtEncQmMIRsjyI2cTJaPbOZIYvvMZRJ7RxpPqH"
                                    },
                                    success: function(data) {
                                        location.reload();
                                    }
                                });
                            }
                        }

                        function deleteInfoDraft(id, e) {

                            if (confirm("Are you sure to delete it?")) {
                                $.ajax({
                                    url: "https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/admin/invoicedraft" + '/' + id,
                                    method: 'DELETE',
                                    type: 'POST',
                                    data: {
                                        _token: "uPdtEncQmMIRsjyI2cTJaPbOZIYvvMZRJ7RxpPqH"
                                    },
                                    success: function(data) {
                                        location.reload();
                                    }
                                });

                            }
                        }

                        //print
                        function delete_invoice_page(i) {
                            if (confirm("Are you sure to destroy the page?")) {
                                $(".sale_table_" + i).remove();
                                page_no -= 1;
                            }
                        }



                        function new_invoice_page() {

                            ++page_no;


                            var invoice = ' <tr class="sale_table_' + page_no + '" style="background-color:#707CD2 !important"> <td colspan="7" ><span class="btn btn-danger glyphicon glyphicon-remove pull-right "' +
                                '           onclick="delete_invoice_page(' + page_no + ')"' +
                                '           ></span></td></tr>' +
                                '           <tr class="text-white sale_table_' + page_no + '" style="background-color:#707CD2 !important">\n' +
                                '                                        <td class="text-center col-sm-1">Sl No</td>\n' +
                                '                                        <td class="text-center col-sm-4">Articles Description</td>\n' +
                                '                                        <td class="text-center col-sm-2">Dell. Qty</td>\n' +
                                '                                        <td class="text-center col-sm-2">Unit Price</td>\n' +
                                '                                        <td class="text-center col-sm-2">Amount</td>\n' +
                                '                                        <td class="text-center col-sm-1"></td>\n' +
                                '                                    </tr>\n';
                            var j = $('.dell_quantity').length + 1;
                            for (; j <= page_no * 30; j++)
                                invoice += '<tr class="sale_table_' + page_no + '">' +
                                '                                        <input type="hidden" id="product_id_' + j + '" name="product[' + j + ']">' +
                                '                                        <td class="text-center">' + j + '</td>' +
                                '                                        <td class="text-center"><label id="articles_description_' + j +
                                '"></label><h5 id="code__' + j + '"></h5><input type="hidden" id="code_' + j + '" name="code[' + j + ']"></td>' +
                                '                                        <td class="text-center"><input class="form-control dell_quantity" type="number"' +
                                '                                                                       min="0" disabled="disabled"' +
                                '                                                                       id="dell_quantity_' + j +
                                '" name="dell_quantity[' + j + ']" ' +
                                '                                                                       onchange="sumTotal(' + j + ');"' +
                                '                                                                       onkeydown="if (event.keyCode == 13){return nextrow(' +
                                j + ',event,\'dell_quantity\');}"' +
                                '                                            >' +
                                '                                            <label class="text-danger text-center text_alert"></label></td>' +
                                '                                        <td class="text-center"><input class="form-control unit_price" type="number"' +
                                '                                                                       min="0" step="0.01" disabled="disabled"' +
                                '                                                                       onchange="sumTotal(' + j + ');"' +
                                '                                                                       name="unit_price[' + j +
                                ']" id="unit_price_' + j + '"' +
                                '                                                                       onkeydown="if (event.keyCode == 13){return nextrow(' +
                                j + ',event,\'unit_price\');}"' +
                                '                                            >' +
                                '' +
                                '                                            <label class="text-danger text-center text_alert"></label>' +
                                '                                        </td>' +
                                '                                        <td class="text-center"><input class="form-control  total_amount" type="number"' +
                                '                                                                       min="0" step="0.01" disabled="disabled"' +
                                '                                                                       onchange="changeSumTotal();"' +
                                '' +
                                '                                                                       name="total_amount[' + j +
                                ']" id="total_amount_' + j + '"' +
                                '                                                                       onkeydown="if (event.keyCode == 13){return nextrow(' +
                                j + ',event,\'total_amount\');}"' +
                                '                                            >' +
                                '                                            <label class="text-danger text-center text_alert"></label>' +
                                '                                        </td>' +
                                '                                        <td class="text-center">' +
                                '                                            <input type="checkbox" name="product[]"' +
                                '                                                class="regular-checkbox productinput" value="' + j + '"' +
                                '                                                id="checkbox_' + j + '" />' +
                                '                                        </td>' +
                                '                                    </tr>';

                            ;

                            $('#purchaseTable').append(invoice);
                            // $('#sale_table').addClass('table table-bordered  table-responsive table-striped ');
                        }

                        function nextrow(i, e, id_name) {
                            sumTotal(i);
                            console.log($('#' + id_name + '_' + i).parent().parent().next().children().eq(5).find("." + id_name + ""));
                            i -= 1;
                            $('#' + id_name + '_' + i).focus();
                            $('#' + id_name + '_' + i).select();
                            return false;
                        }


                        function changeSumTotal() {

                            var sum = 0.0;
                            $('.total_amount').each(function() {
                                sum += Number($(this).val());
                            });

                            $('#total_amount').val(sum);
                            $('#amountInWord').html(inWords(sum));
                            grandTotalShow();
                        }

                        function grandTotalShow() {
                            $('#currentTotalAmount').html(parseFloat($('#total_amount').val()));

                            $('#currentPaymentAmount').html(payment + parseFloat($('#total_bill').val()));
                            $('#currentDiscountAmount').html(parseFloat($('#discount').val()));

                            if (invoice1.receipt) {
                                $('#grandtotalamount').html(parseFloat($('#totalamount').html()) + parseFloat($('#total_amount').val()) - parseFloat($('#total_bill').val()) - parseFloat($('#discount').val()) - payment);
                            } else {
                                $('#grandtotalamount').html(parseFloat($('#totalamount').html()) + parseFloat($('#total_amount').val()) - parseFloat($('#total_bill').val()) - parseFloat($('#discount').val()));
                            }
                        }

                        function calculatePayment() {

                            if ($('#customer_receipt_type_id') == 1) {
                                var old = parseFloat($("#totalamount").html());
                                var bill = $("#bill_amount").val();
                                var amount = $("#total_bill").val();
                                var discount = $("#discount").val();
                                var total = parseFloat(bill) - parseFloat(discount) - parseFloat(amount);
                                $("#due_amount").val(total.toFixed(2));
                                $('.total_duebalance_span').html('৳ ' + ((old) ? old : '0.00'));
                                $('.total_payable_span').html('৳ ' + ((bill) ? bill - old : '0.00'));
                                $('.grand_total_payable_span').html('৳ ' + ((bill) ? parseFloat(bill).toFixed(2) : '0.00'));

                                $('.discount_amount_span').html('৳ ' + ((discount) ? discount : '0.00'));
                                $('.total_payment_span').html('৳ ' + ((amount) ? amount : '0.00'));
                                $(".balance_due_span").html('৳ ' + ((total) ? total.toFixed(2) : '0.00'));
                            } else {
                                var old = parseFloat($("#totalamount").html());
                                var bill = $("#bill_amount").val();
                                var amount = $("#total_bill").val();
                                var discount = $("#discount").val();
                                var total = old + parseFloat(bill) - parseFloat(discount) - parseFloat(amount);
                                $("#due_amount").val(total.toFixed(2));
                                $('.total_duebalance_span').html('৳ ' + ((old) ? old : '0.00'));
                                $('.total_payable_span').html('৳ ' + ((bill) ? bill : '0.00'));
                                $('.grand_total_payable_span').html('৳ ' + ((old) && (bill) ? (old + parseFloat(bill)).toFixed(2) : '0.00'));

                                $('.discount_amount_span').html('৳ ' + ((discount) ? discount : '0.00'));
                                $('.total_payment_span').html('৳ ' + ((amount) ? amount : '0.00'));
                                $(".balance_due_span").html('৳ ' + ((total) ? total.toFixed(2) : '0.00'));
                            }
                        }
                        //remove Sale
                        function removeSale(i) {

                            $('#product_id_' + i).val(null);
                            $('#articles_description_' + i).html('');
                            $('#code__' + i).html('');
                            $('#code_' + i).html('');
                            $('#dell_quantity_' + i).val(null);
                            $('#unit_price_' + i).val(null);
                            $('#total_amount_' + i).val(null);
                            $('#dell_quantity_' + i).css("border-color", "#e4e7ea");

                            $('#dell_quantity_' + i).attr("disabled", "disabled");
                            $('#unit_price_' + i).attr("disabled", "disabled");
                            $('#total_amount_' + i).attr("disabled", "disabled");

                            changeSumTotal();


                        }


                        // function sumTotal(id) {

                        //     var unit_price= Math.round($('#unit_price_' + id).val()* 100) / 100;
                        //     var total = $('#dell_quantity_' + id).val() * unit_price;
                        //     total= Math.round(total*100)/100;
                        //     $('#total_amount_' + id).val(total);
                        //     $('#unit_price_' + id).val(unit_price);
                        //     $('#unit_price_' + id).attr("value", unit_price);
                        //     $('#total_amount_' + id).attr("value", total);
                        //     changeSumTotal();

                        // }
                        /*
        function searchProductCode(i) {
            var code = $("#code_" + i).val();
            var company_id = $("#company_id").val();
            var j = 0;
            var desicion = true;
            for (; j <= 30 * page_no; j++)
                if (i != j && $("#code_" + j).val() == code && $("#code_" + j).val() != '') {

                    $('#code_' + i).parent().children(".text_alert").html('Same Product Code');
                    desicion = false;
                    break;

                }
            else $('#code_' + i).parent().children(".text_alert").html('');

            if (desicion)
                $.ajax({
                    type: "get",
                    url: "https://apps.bitspecksolutions.com/shop/posshop/posshop-tm-V1.0/public/admin/getProductCode",
            data: {
                code: code,
                company_id: company_id
            },
            success: function(response) {

                if (response != '') {
                    $('#dell_quantity_' + i).removeAttr("disabled", "disabled");
                    $('#unit_price_' + i).removeAttr("disabled", "disabled");
                    $('#total_amount_' + i).removeAttr("disabled", "disabled");
                    $('#articles_description_' + i).html(response[0]['name']);
                    $('#unit_price_' + i).val(response[0]['price']);
                } else {
                    $('#articles_description_' + i).html('');
                    $('#dell_quantity_' + i).val('');
                    $('#unit_price_' + i).val('');
                    $('#total_amount_' + i).val('');
                    $('#dell_quantity_' + i).attr("disabled", "disabled");
                    $('#unit_price_' + i).attr("disabled", "disabled");
                    $('#total_amount_' + i).attr("disabled", "disabled");
                }

            },

            error: function(e) {
                console.log(e)
            }
        });
}
*/
                        function form_validation(e) {
                            var decision = true;
                            //
                            // if ($(".company_id option:selected") == 'selected') {
                            //     $("#company_id").css('border-color', 'red');
                            //     decision = false;
                            // }
                            //
                            // else $("#company_id").css("border-color", "#e4e7ea");
                            //

                            var row = 1;
                            // var upto =  page_no * 30 ;
                            // console.log(i);
                            for (; row <= i; row++) {
                                if ($('#unit_price_' + row).val() != '') {
                                    if ($('#unit_price_' + row).val() <= 0 || $('#unit_price_' + row).val() == null) {
                                        decision = false;
                                        $('#unit_price_' + row).parent().children(".text_alert").html('Must be filled');
                                    } else {
                                        $('#unit_price_' + row).parent().children(".text_alert").html('');
                                        decision = true;
                                    }
                                    // if ($('#unit_price_' + row).val() < $('#unit_price_' + row).attr('min')) {
                                    //     decision = false;
                                    //     // console.log(decision);

                                    //     $('#unit_price_' + row).parent().children(".text_alert").html('Invalid selling price');
                                    // } else {$('#unit_price_' + row).parent().children(".text_alert").html('');decision = true;}
                                    // if ($('#total_amount_' + row).val() <= 0 || $('#total_amount_' + row).val() == null) {
                                    //     decision = false;
                                    //     console.log(decision);

                                    //     $('#total_amount_' + row).parent().children(".text_alert").html('Must be filled');
                                    // } else {$('#total_amount_' + row).parent().children(".text_alert").html('');}
                                    // if ($('#dell_quantity_' + row).val() <= 0 || $('#dell_quantity_' + row).val() == null) {
                                    //     decision = false;
                                    // //     console.log(row);
                                    //     console.log(decision);

                                    //     $('#dell_quantity_' + row).parent().children(".text_alert").html('Must be filled');
                                    // } else {$('#dell_quantity_' + row).parent().children(".text_alert").html('');}

                                } else {
                                    $('#unit_price_' + row).parent().children(".text_alert").html('');
                                    $('#total_amount_' + row).parent().children(".text_alert").html('');
                                    $('#dell_quantity_' + row).parent().children(".text_alert").html('');
                                    decision = true;
                                }

                            }
                            if ($("#customer_id").val() == '' || $("#customer_id").val() == null) {
                                $("#customer_id").parent().css('border', '1px solid red');
                                decision = false;

                            } else {
                                $("#customer_id").parent().css('border', '');
                            }

                            if ($("#percentage").val() == '' || $("#percentage").val() == null) {
                                $("#percentage").css('border-color', 'red');
                                $("#percentage").focus();
                                decision = false;

                            } else {
                                $("#percentage").css("border-color", "#e4e7ea");
                            }
                            if ($("#create_date").val() == '' || $("#create_date").val() == null) {
                                $("#create_date").css('border-color', 'red');
                                decision = false;

                            } else {
                                $("#create_date").css("border-color", "#e4e7ea");
                            }

                            if ($(e).val() == 'invoice_payment') {
                                if ($("#total").val() == '' || $("#total").val() == null) {
                                    $("#total").parent().parent().css('border', '1px solid red');
                                    decision = false;

                                } else {
                                    $("#total").parent().parent().css('border', '');
                                    decision = true;
                                }
                                if ($("#discount_amount").val() == '' || $("#discount_amount").val() == null) {
                                    $("#discount_amount").parent().parent().css('border', '1px solid red');
                                    decision = false;

                                } else {
                                    $("#discount_amount").parent().parent().css('border', '');
                                    decision = true;
                                }
                            }
                            if (decision == true && $('#productTbody').children().length == 0) {
                                $("#head_alert").html("There is no product");
                                if ($("#total_amount").val() == '' || $("#total_amount").val() == null || $("#total_amount").val() == 0) {
                                    $("#total_amount").css('border-color', 'red');
                                    $("#total_amount").focus();
                                    decision = false;
                                } else $("#total_amount").css("border-color", "#e4e7ea");
                            } else {
                                $("#head_alert").html('');
                            }
                            if ($(e).val() == 'invoice_payment' && $('#checkedit').val() != 2) {
                                decision = false;
                            }
                            return decision;
                        }



                        // number to word

                        var a = ['', 'one ', 'two ', 'three ', 'four ', 'five ', 'six ', 'seven ', 'eight ', 'nine ', 'ten ', 'eleven ',
                            'twelve ', 'thirteen ', 'fourteen ', 'fifteen ', 'sixteen ', 'seventeen ', 'eighteen ', 'nineteen '
                        ];
                        var b = ['', '', 'twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety'];

                        function inWords(num) {
                            if ((num = num.toString()).length > 9) return 'overflow';
                            n = ('000000000' + num).substr(-9).match(/^(\d{2})(\d{2})(\d{2})(\d{1})(\d{2})$/);
                            if (!n) return;
                            var str = '';
                            str += (n[1] != 0) ? (a[Number(n[1])] || b[n[1][0]] + ' ' + a[n[1][1]]) + 'crore ' : '';
                            str += (n[2] != 0) ? (a[Number(n[2])] || b[n[2][0]] + ' ' + a[n[2][1]]) + 'lakh ' : '';
                            str += (n[3] != 0) ? (a[Number(n[3])] || b[n[3][0]] + ' ' + a[n[3][1]]) + 'thousand ' : '';
                            str += (n[4] != 0) ? (a[Number(n[4])] || b[n[4][0]] + ' ' + a[n[4][1]]) + 'hundred ' : '';
                            str += (n[5] != 0) ? ((str != '') ? 'and ' : '') + (a[Number(n[5])] || b[n[5][0]] + ' ' + a[n[5][1]]) + ' ' : '';
                            return str + ' taka only';
                        }
                    </script>



                </div>
            </section>
        </div>
        <!-- /.content-wrapper -->
        <footer class="main-footer" style="margin-left: 0px;">
            <div></div>
            <label>Copyright © 2023</label>
        </footer>
    </div>

    <!-- ============================================================== -->
    <!-- Wrapper -->
    <!-- ============================================================== -->
    <!-- /#wrapper -->


    <script>
        $(document).ready(function() {
            $("#menu-close").click(function(e) {
                e.preventDefault();
                $("#sidebar-wrapper1").toggleClass("active");
            });
            $(function() {
                $('[data-toggle="tooltip"]').tooltip();
            });
            $("#menu-toggle1").click(function(e) {
                e.preventDefault();
                $("#sidebar-wrapper1").toggleClass("active");
            });

            if ($("#mymce").length > 0) {
                tinymce.init({
                    selector: "textarea#mymce",
                    theme: "modern",
                    height: 300,
                    plugins: [
                        "advlist autolink link image lists charmap print preview hr anchor pagebreak spellchecker", "searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking", "save table contextmenu directionality emoticons template paste textcolor"
                    ],
                    toolbar: "insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | l      ink image | print preview media fullpage | forecolor backcolor emoticons",
                });
            }
        });
    </script>
    <script>
        // For select 2
        $(document).ready(function() {

            $(".select2").select2({
                theme: 'bootstrap4',
                width: '100%'
            });
            $('.custom-link').each(function(index, element) {
                if ($(element).hasClass('active')) {
                    $(element).parent().parent().parent().addClass('menu-open');
                    $(element).parent().parent().parent().children().eq(0).addClass('active');
                };
            });
            // Clock pickers
            $('#single-input, .clockpicker, .timepick').clockpicker({
                placement: 'top',
                align: 'left',
                autoclose: true,
                format: '12',
                'default': 'now'
            });
            $('.clockpicker').clockpicker({
                donetext: 'Done',
            }).find('input').change(function() {});
            // Date Picker
            jQuery('#datepicker-autoclose, .mydatepicker, .datepick').datepicker({
                format: 'yyyy-mm-dd',
                autoclose: true,
                orientation: 'bottom',
            });
            jQuery('.datepick_custom').datepicker({
                autoclose: true,
                format: 'yyyy/mm/dd',
                todayHighlight: true,
                container: '.panel-body'
            });

            // Daterange picker
            $('.input-daterange-datepicker').daterangepicker({
                buttonClasses: ['btn', 'btn-sm'],
                applyClass: 'btn-danger',
                cancelClass: 'btn-inverse',
                "opens": "left",
                locale: {
                    format: 'YYYY-MM-DD'
                }
            });
            $("#menu-toggle12").click(function(e) {
                e.preventDefault();
                $("#sidebar-wrapper1").toggleClass("active");
            });
        });
    </script>
</body>

</html>